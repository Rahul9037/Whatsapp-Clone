{"ast":null,"code":"import _slicedToArray from\"/Users/rahulsmac/Documents/reactapp/whatsapp-clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Avatar}from'@material-ui/core';import'./SidebarChat.css';import db from'../../firebase';import{Link}from'react-router-dom';function SidebarChat(_ref){var _messages$;var id=_ref.id,name=_ref.name,addNewChat=_ref.addNewChat;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),seed=_useState2[0],setSeed=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];useEffect(function(){if(id){db.collection('rooms').doc(id).collection('messages').orderBy(\"timestamp\",\"desc\").onSnapshot(function(snapshot){return setMessages(snapshot.docs.map(function(doc){return doc.data();}));});}},[id]);useEffect(function(){setSeed(Math.floor(Math.random()*5000));},[]);var createChat=function createChat(){var roomName=prompt('Please enter the name for chat');if(roomName){db.collection('rooms').add({name:roomName});}};return!addNewChat?/*#__PURE__*/React.createElement(Link,{to:\"/rooms/\".concat(id)},/*#__PURE__*/React.createElement(\"div\",{className:\"sidebarChat\"},/*#__PURE__*/React.createElement(Avatar,{src:\"https://avatars.dicebear.com/api/human/\".concat(seed,\".svg\")}),/*#__PURE__*/React.createElement(\"div\",{className:\"sidebarChat__info\"},/*#__PURE__*/React.createElement(\"h2\",null,name),/*#__PURE__*/React.createElement(\"p\",null,(_messages$=messages[0])===null||_messages$===void 0?void 0:_messages$.message)))):/*#__PURE__*/React.createElement(\"div\",{onClick:createChat,className:\"sidebarChat\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Add New Chat\"));}export default SidebarChat;","map":{"version":3,"sources":["/Users/rahulsmac/Documents/reactapp/whatsapp-clone/src/components/SidebarChat/SidebarChat.js"],"names":["React","useState","useEffect","Avatar","db","Link","SidebarChat","id","name","addNewChat","seed","setSeed","messages","setMessages","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","Math","floor","random","createChat","roomName","prompt","add","message"],"mappings":"yKAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,MAAT,KAAuB,mBAAvB,CACA,MAAO,mBAAP,CACA,MAAOC,CAAAA,EAAP,KAAe,gBAAf,CACA,OAASC,IAAT,KAAqB,kBAArB,CAEA,QAASC,CAAAA,WAAT,MAA+C,mBAAxBC,CAAAA,EAAwB,MAAxBA,EAAwB,CAApBC,IAAoB,MAApBA,IAAoB,CAAdC,UAAc,MAAdA,UAAc,eACnBR,QAAQ,CAAC,EAAD,CADW,wCACpCS,IADoC,eAC9BC,OAD8B,8BAEXV,QAAQ,CAAC,EAAD,CAFG,yCAEpCW,QAFoC,eAE1BC,WAF0B,eAI3CX,SAAS,CAAC,UAAM,CACZ,GAAGK,EAAH,CAAM,CACFH,EAAE,CAACU,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BR,EAA3B,EAA+BO,UAA/B,CAA0C,UAA1C,EACCE,OADD,CACS,WADT,CACsB,MADtB,EAECC,UAFD,CAEY,SAAAC,QAAQ,QAChBL,CAAAA,WAAW,CAACK,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAACL,GAAD,QAASA,CAAAA,GAAG,CAACM,IAAJ,EAAT,EAAlB,CAAD,CADK,EAFpB,EAKH,CACJ,CARQ,CAQN,CAACd,EAAD,CARM,CAAT,CAUAL,SAAS,CAAC,UAAM,CACZS,OAAO,CAACW,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,GAAgB,IAA3B,CAAD,CAAP,CACH,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACrB,GAAMC,CAAAA,QAAQ,CAAGC,MAAM,CAAC,gCAAD,CAAvB,CAEA,GAAID,QAAJ,CAAc,CACVtB,EAAE,CAACU,UAAH,CAAc,OAAd,EAAuBc,GAAvB,CAA2B,CACvBpB,IAAI,CAAEkB,QADiB,CAA3B,EAGH,CACJ,CARD,CASA,MAAO,CAACjB,UAAD,cACH,oBAAC,IAAD,EAAM,EAAE,kBAAYF,EAAZ,CAAR,eACI,2BAAK,SAAS,CAAC,aAAf,eACI,oBAAC,MAAD,EAAQ,GAAG,kDAA4CG,IAA5C,QAAX,EADJ,cAEI,2BAAK,SAAS,CAAC,mBAAf,eACI,8BAAKF,IAAL,CADJ,cAEI,yCAAII,QAAQ,CAAC,CAAD,CAAZ,qCAAI,WAAaiB,OAAjB,CAFJ,CAFJ,CADJ,CADG,cAWC,2BAAK,OAAO,CAAEJ,UAAd,CACI,SAAS,CAAC,aADd,eAEI,6CAFJ,CAXR,CAgBH,CAED,cAAenB,CAAAA,WAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Avatar } from '@material-ui/core';\nimport './SidebarChat.css';\nimport db from '../../firebase';\nimport { Link } from 'react-router-dom';\n\nfunction SidebarChat({ id, name, addNewChat }) {\n    const [seed, setSeed] = useState('');\n    const [messages, setMessages] = useState([]);\n\n    useEffect(() => {\n        if(id){\n            db.collection('rooms').doc(id).collection('messages')\n            .orderBy(\"timestamp\", \"desc\")\n            .onSnapshot(snapshot => (\n                setMessages(snapshot.docs.map((doc) => doc.data()))\n            ))\n        }\n    }, [id])\n\n    useEffect(() => {\n        setSeed(Math.floor(Math.random() * 5000));\n    }, [])\n\n    const createChat = () => {\n        const roomName = prompt('Please enter the name for chat');\n\n        if (roomName) {\n            db.collection('rooms').add({\n                name: roomName\n            })\n        }\n    }\n    return !addNewChat ? (\n        <Link to={`/rooms/${id}`}>\n            <div className=\"sidebarChat\">\n                <Avatar src={`https://avatars.dicebear.com/api/human/${seed}.svg`} />\n                <div className=\"sidebarChat__info\">\n                    <h2>{name}</h2>\n                    <p>{messages[0]?.message}</p>\n                </div>\n            </div>\n        </Link>\n    ) : (\n            <div onClick={createChat}\n                className=\"sidebarChat\">\n                <h2>Add New Chat</h2>\n            </div>\n        )\n}\n\nexport default SidebarChat\n"]},"metadata":{},"sourceType":"module"}